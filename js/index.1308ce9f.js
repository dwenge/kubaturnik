(function(){"use strict";var t={1954:function(t,e,n){var a=n(9242),o=n(3396);function i(t,e,n,a,i,l){const r=(0,o.up)("KubaturnikComponent");return(0,o.wg)(),(0,o.j4)(r)}var l=n(4870),r=n(7139);function u(t){const e=t.target,n=e.type;e.value.length>0&&setTimeout((()=>{e.type="text",e.setSelectionRange(0,e.value.length),e.type=n}),0)}const s=t=>((0,o.dD)("data-v-f017a0da"),t=t(),(0,o.Cn)(),t),c={class:"item"},d={class:"d"},v={class:"v"},m={class:"q"},p={class:"input"},f=["value"],b=s((()=>(0,o._)("td",null,[(0,o._)("div",{class:"v"},"=")],-1))),w={class:"total"};var _={__name:"ListItem",props:["diameter","volume","quantity"],emits:["update:quantity","remove"],setup(t,{emit:e}){const n=t,a=(0,o.Fl)({get:()=>n.quantity,set(t){""!==t&&e("update:quantity",t>0?t:1)}}),i=(0,o.Fl)((()=>(n.volume*n.quantity).toFixed(3)));return(n,s)=>((0,o.wg)(),(0,o.iD)("tr",c,[(0,o._)("td",null,[(0,o._)("div",d,(0,r.zw)(t.diameter),1)]),(0,o._)("td",null,[(0,o._)("div",v,(0,r.zw)(t.volume),1)]),(0,o._)("td",null,[(0,o._)("div",m,[(0,o._)("button",{class:"btn",onClick:s[0]||(s[0]=t=>a.value--)},"-"),(0,o._)("div",p,[(0,o._)("input",{type:"number",min:"0",step:"1",value:a.value,onInput:s[1]||(s[1]=t=>a.value=t.target.value),onFocus:s[2]||(s[2]=(...t)=>(0,l.SU)(u)&&(0,l.SU)(u)(...t))},null,40,f)]),(0,o._)("button",{class:"btn",onClick:s[3]||(s[3]=t=>a.value++)},"+")])]),b,(0,o._)("td",null,[(0,o._)("div",w,(0,r.zw)(i.value),1)]),(0,o._)("td",null,[(0,o._)("button",{class:"r",onClick:s[4]||(s[4]=t=>e("remove"))},"x")])]))}},g=n(89);const y=(0,g.Z)(_,[["__scopeId","data-v-f017a0da"]]);var h=y,k=n(65),I=n(3831);const q=(0,I.X3)("kubaturnik",1,{upgrade(t){t.objectStoreNames.contains("calc")||t.createObjectStore("calc",{keyPath:"id",autoIncrement:!0})}}),C=async()=>await(await q).getAll("calc")||[],F=async(t,e,n)=>(await q).add("calc",{d:t,v:e,q:n}),S=async t=>(await q).put("calc",t),j=async t=>(await q).delete("calc",t),O=async()=>(await q).clear("calc"),U=()=>[[3,.012],[4,.016],[5,.023],[6,.028],[7,.036],[8,.045],[9,.055],[10,.065],[11,.08],[12,.093],[13,.108],[14,.123],[15,.14],[16,.155],[17,.175],[18,.194],[19,.21],[20,.23],[21,.26],[22,.28],[23,.31],[24,.33],[25,.36],[26,.39],[27,.42],[28,.45],[29,.48],[30,.52],[31,.55],[32,.59],[33,.62],[34,.66],[35,.7],[36,.74],[37,.78],[38,.82],[39,.86],[40,.9],[41,.95],[42,1],[43,1.04],[44,1.09],[45,1.14],[46,1.19],[47,1.24],[48,1.3],[49,1.35],[50,1.41],[51,1.47],[52,1.53],[53,1.59],[54,1.65],[55,1.72],[56,1.78],[57,1.84],[58,1.91],[59,1.98],[60,2.05],[61,2.11],[62,2.18],[63,2.25],[64,2.32],[65,2.38],[66,2.44],[67,2.51],[68,2.57]];var x={load:C,add:F,update:S,remove:j,clear:O,getTable:U};const D={class:"form"},z=["value"];var A={__name:"AddForm",setup(t){const e=(0,k.oR)(),n=x.getTable(),i=(0,o.Fl)((()=>{const t=e.state.items.reduce(((t,e)=>t.add(e.d)),new Set);return n.filter((e=>!t.has(e[0])))})),s=(0,l.iH)(null),c=(0,l.iH)(1);function d(){if(s.value){const t=s.value.split(","),n=c.value;e.dispatch("addItem",{d:+t[0],v:+t[1],q:+n>0?n:1}),s.value="",c.value=1}}return(t,e)=>((0,o.wg)(),(0,o.iD)("div",D,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.value,(t=>((0,o.wg)(),(0,o.iD)("option",{key:t[0],value:t.join(",")},(0,r.zw)(t[0]),9,z)))),128))],512),[[a.bM,s.value]]),(0,o.wy)((0,o._)("input",{type:"number",min:"1","onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),onFocus:e[2]||(e[2]=(...t)=>(0,l.SU)(u)&&(0,l.SU)(u)(...t)),style:{width:"50px"}},null,544),[[a.nr,c.value]]),(0,o._)("button",{onClick:d},"Добавить")]))}};const R=(0,g.Z)(A,[["__scopeId","data-v-b5a204c6"]]);var T=R;const K=t=>((0,o.dD)("data-v-250ae25c"),t=t(),(0,o.Cn)(),t),Z={class:"list-content"},H={class:"content"},N={class:"bottom"},M={class:"right"},P=K((()=>(0,o._)("br",null,null,-1))),E={class:"total"},L=K((()=>(0,o._)("div",null,"Итого",-1))),V={class:"number"};var W={__name:"ItemList",setup(t){const e=(0,k.oR)();e.dispatch("load");const n=(0,o.Fl)((()=>[...e.state.items].sort(((t,e)=>t.d<e.d?-1:1)))),a=(0,o.Fl)((()=>n.value.reduce(((t,e)=>t+e.v*e.q),0).toFixed(3)));function i(t,n){t.q=n,e.dispatch("updateItem",t)}return(t,u)=>((0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("div",H,[(0,o._)("table",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.value,(t=>((0,o.wg)(),(0,o.j4)((0,l.SU)(h),{key:t.id,diameter:t.d,volume:t.v,quantity:t.q,"onUpdate:quantity":e=>i(t,e),onRemove:n=>(0,l.SU)(e).dispatch("removeItem",t.id)},null,8,["diameter","volume","quantity","onUpdate:quantity","onRemove"])))),128))])]),(0,o._)("div",N,[(0,o._)("div",M,[(0,o.Wm)((0,l.SU)(T))]),P,(0,o._)("div",E,[L,(0,o._)("div",V,(0,r.zw)(a.value),1)])])]))}};const Y=(0,g.Z)(W,[["__scopeId","data-v-250ae25c"]]);var B=Y;const X=t=>((0,o.dD)("data-v-17074b68"),t=t(),(0,o.Cn)(),t),G={class:"wrap"},J=X((()=>(0,o._)("br",null,null,-1))),Q=X((()=>(0,o._)("br",null,null,-1)));var $={__name:"KubaturnikComponent",setup(t){const e=(0,k.oR)();function n(){confirm("Новый расчет???")&&e.dispatch("clear")}return(t,e)=>((0,o.wg)(),(0,o.iD)("div",G,[(0,o._)("button",{onClick:n},"Новый расчет"),J,Q,(0,o.Wm)((0,l.SU)(B))]))}};const tt=(0,g.Z)($,[["__scopeId","data-v-17074b68"]]);var et=tt,nt={name:"App",components:{KubaturnikComponent:et}};const at=(0,g.Z)(nt,[["render",i]]);var ot=at,it=n(5431);(0,it.z)("/kubaturnik/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var lt=(0,k.MT)({state:{items:[]},getters:{},mutations:{setItems(t,e){t.items=e||[]}},actions:{async load({commit:t}){t("setItems",await x.load())},async addItem({commit:t},{d:e,v:n,q:a}){await x.add(e,n,a),t("setItems",await x.load())},async updateItem({commit:t},e){await x.update({...e}),t("setItems",await x.load())},async removeItem({commit:t},e){await x.remove(e),t("setItems",await x.load())},async clear({commit:t}){await x.clear(),t("setItems",[])}},modules:{}});(0,a.ri)(ot).use(lt).mount("#app")}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,a,o,i){if(!a){var l=1/0;for(c=0;c<t.length;c++){a=t[c][0],o=t[c][1],i=t[c][2];for(var r=!0,u=0;u<a.length;u++)(!1&i||l>=i)&&Object.keys(n.O).every((function(t){return n.O[t](a[u])}))?a.splice(u--,1):(r=!1,i<l&&(l=i));if(r){t.splice(c--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[a,o,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={826:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,i,l=a[0],r=a[1],u=a[2],s=0;if(l.some((function(e){return 0!==t[e]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(u)var c=u(n)}for(e&&e(a);s<l.length;s++)i=l[s],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},a=self["webpackChunkkubaturnik"]=self["webpackChunkkubaturnik"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(1954)}));a=n.O(a)})();
//# sourceMappingURL=index.1308ce9f.js.map